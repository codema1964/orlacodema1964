<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Orla Interactiva CODEMA - Generaci√≥n del 64</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark': '#0f172a', 
                        'brand-teal': '#0d9488', 
                        'brand-amber': '#d97706',
                        'old-blue': '#3b82f6', 
                        'new-purple': '#8b5cf6',
                        'btn-dark': '#1e293b', 
                        'btn-red': '#ef4444',
                        'modal-bg': '#0f172a',
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                },
            },
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            color: #1e293b;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .card-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .card-container:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border-color: #94a3b8;
            z-index: 10;
        }
        .photo-wrapper {
            position: relative; overflow: hidden; border-radius: 0.75rem; width: 100%; padding-top: 100%;
            background-color: #e2e8f0;
        }
        .photo-wrapper img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity 0.5s ease; }
        .photo-wrapper img.hidden-photo { opacity: 0; transform: scale(1.1); filter: blur(2px); }
        .photo-wrapper:hover img.hidden-photo { opacity: 1; transform: scale(1); filter: blur(0px); }
        .photo-wrapper:hover img.visible-photo { opacity: 0; transform: scale(0.9); }
        
        .modal-overlay { background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px); z-index: 50; }
        /* Modal de edici√≥n con Z-Index superior para evitar bloqueos */
        .modal-edit-overlay { background-color: rgba(0, 0, 0, 0.9); backdrop-filter: blur(5px); z-index: 60; }
        
        .dark-scroll::-webkit-scrollbar { width: 6px; }
        .dark-scroll::-webkit-scrollbar-track { background: #1e293b; }
        .dark-scroll::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    </style>
</head>
<body>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, addDoc, updateDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIza" + "SyAZgttBrxRAeeRELVA-3j71hQZ4NbxoeNo", 
            authDomain: "orlageneracion64.firebaseapp.com",
            projectId: "orlageneracion64",
            storageBucket: "orlageneracion64.firebasestorage.app",
            messagingSenderId: "550229291802",
            appId: "1:550229291802:web:1907dc83e4c3c0facc32a3"
        };

        const ADMIN_UID = 'hbQ6YVVOZqVQ6HbHgNhzeci6rQ52';
        const ADMIN_EMAIL = 'codema1964@gmail.com'; 
        const appId = 'default-app-id'; 
        let db, auth, alumniData=[], currentView=null, selectedPerson=null, currentUserId=null; 
        const getCollectionPath = () => `/artifacts/${appId}/public/data/alumni`;

        function updateStatus(msg, err=false) {
            const el = document.getElementById('connection-status');
            if (el) {
                el.innerHTML = err ? `‚ö†Ô∏è` : `‚óè`;
                el.className = `text-xs font-bold px-2 py-1 rounded-full ${err?'bg-red-500 text-white':'bg-emerald-500 text-white'}`;
            }
        }

        async function init() {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                await setPersistence(auth, browserLocalPersistence);
                updateStatus("...");
                await signInAnonymously(auth);
                onAuthStateChanged(auth, u => {
                    if(u) {
                        currentUserId = u.uid;
                        const admin = isCurrentUserAdmin();
                        document.getElementById('current-uid-display').innerHTML = admin ? 
                            `<span class="text-emerald-400 text-xs font-mono bg-emerald-900/30 px-2 py-1 rounded border border-emerald-500/30">ADMIN</span>` : ``;
                        if(admin) document.getElementById('add-btn-header').classList.remove('hidden');
                        updateStatus("OK");
                        showSelectionModal();
                    }
                });
            } catch(e) { updateStatus("Err", true); }
        }

        function isCurrentUserAdmin() { return currentUserId === ADMIN_UID; }
        
        // Funciones Globales de Navegaci√≥n
        window.showSelectionModal = function() { document.getElementById('selection-modal').classList.remove('hidden'); document.getElementById('app-main-content').classList.add('hidden'); }
        window.hideSelectionModal = function() { document.getElementById('selection-modal').classList.add('hidden'); document.getElementById('app-main-content').classList.remove('hidden'); }
        window.closeModal = function() { document.getElementById('modal-wrapper').classList.add('hidden'); }
        window.closeDataEntryModal = function() { document.getElementById('data-entry-modal').classList.add('hidden'); }
        
        window.selectView = function(v) {
            currentView = v; hideSelectionModal();
            onSnapshot(query(collection(db, getCollectionPath())), s => {
                alumniData = s.docs.map(d => ({id:d.id, ...d.data()})).sort((a,b)=>(a.apellidos||'').localeCompare(b.apellidos||''));
                window.displayData = [...alumniData];
                renderOrla();
            });
        }

        // L√ìGICA DE EDICI√ìN CORREGIDA
        window.openDataEntryModal = function(mode, id=null) {
            if(!isCurrentUserAdmin()) { alert("Permiso denegado"); return; }
            
            // 1. Resetear formulario
            document.getElementById('data-entry-form').reset();
            document.getElementById('data-entry-status').textContent = '';
            document.getElementById('form-mode').value = mode;
            document.getElementById('form-doc-id').value = id || '';

            const title = document.getElementById('data-entry-title');
            const btn = document.getElementById('data-entry-button');
            
            // 2. Si es editar, rellenar datos
            if(mode === 'edit' && id) {
                // Aseguramos que tenemos el objeto m√°s reciente
                selectedPerson = alumniData.find(p => p.id === id);
                if(!selectedPerson) { alert("Error: Ficha no encontrada"); return; }

                title.textContent = `Editar: ${selectedPerson.nombre}`;
                btn.textContent = 'Guardar Cambios';

                // Helper para rellenar seguro
                const setVal = (fieldId, val) => {
                    const el = document.getElementById(fieldId);
                    if(el) el.value = val || '';
                };

                setVal('nombre', selectedPerson.nombre);
                setVal('apellidos', selectedPerson.apellidos);
                setVal('fotoAntiguaUrl', selectedPerson.antiguo?.fotoUrl);
                setVal('anoEntrada', selectedPerson.antiguo?.anoEntrada);
                setVal('anoSalida', selectedPerson.antiguo?.anoSalida);
                setVal('cursoEntrada', selectedPerson.antiguo?.cursoEntrada);
                setVal('cursoSalida', selectedPerson.antiguo?.cursoSalida);
                setVal('fechaFotoAntigua', selectedPerson.antiguo?.fechaFoto);
                setVal('fotoActualUrl', selectedPerson.actual?.fotoUrl);
                setVal('profesion', selectedPerson.actual?.profesion);
                setVal('ciudad', selectedPerson.actual?.ciudad);
                setVal('email', selectedPerson.actual?.email);
                
                // 3. Cerrar expl√≠citamente la ficha de detalle
                window.closeModal(); 
            } else {
                title.textContent = 'Nuevo Alumno';
                btn.textContent = 'Crear Ficha';
            }

            // 4. Mostrar el modal de edici√≥n
            document.getElementById('data-entry-modal').classList.remove('hidden');
        }

        window.saveAlumnusData = async function(e) {
            e.preventDefault();
            const st = document.getElementById('data-entry-status');
            st.innerHTML = '<span class="text-brand-teal animate-pulse">Guardando...</span>';
            
            // Recoger valores manualmente para mayor seguridad
            const getVal = (id) => document.getElementById(id).value;
            
            const data = {
                nombre: getVal('nombre'), 
                apellidos: getVal('apellidos'),
                antiguo: {
                    fotoUrl: getVal('fotoAntiguaUrl'), anoEntrada: getVal('anoEntrada'), anoSalida: getVal('anoSalida'),
                    cursoEntrada: getVal('cursoEntrada'), cursoSalida: getVal('cursoSalida'), fechaFoto: getVal('fechaFotoAntigua')
                },
                actual: {
                    fotoUrl: getVal('fotoActualUrl'), profesion: getVal('profesion'), ciudad: getVal('ciudad'), email: getVal('email')
                },
                ownerUid: currentUserId
            };

            try {
                const path = getCollectionPath();
                const mode = document.getElementById('form-mode').value;
                const docId = document.getElementById('form-doc-id').value;

                if(mode === 'add') {
                    await addDoc(collection(db, path), data);
                } else {
                    await updateDoc(doc(db, path, docId), data);
                }
                
                st.innerHTML = '<span class="text-emerald-400">¬°Guardado Correctamente!</span>';
                setTimeout(() => window.closeDataEntryModal(), 800);
            } catch(err) { 
                console.error(err);
                st.textContent = 'Error al guardar. Verifica tu conexi√≥n.'; 
            }
        }

        window.deleteAlumnusData = async function() {
            try {
                await deleteDoc(doc(db, getCollectionPath(), document.getElementById('confirm-doc-id').value));
                document.getElementById('confirm-delete-modal').classList.add('hidden');
                window.closeModal();
            } catch(e){ alert("Error al borrar"); }
        }

        function getPlaceholderColor(n) { const h = n.split('').reduce((a,c)=>c.charCodeAt(0)+a,0)%360; return `hsl(${h},70%,85%)`; }
        
        window.renderOrla = function() {
            const c = document.getElementById('orla-container');
            if(!c) return;
            c.innerHTML = window.displayData.map(p => {
                const isOld = currentView === 'old';
            const url = isOld ? p.antiguo?.fotoUrl : p.actual?.fotoUrl;
            const hidden = isOld ? p.actual?.fotoUrl : p.antiguo?.fotoUrl;
            const bg = getPlaceholderColor(p.nombre);
            
            return `<div class="card-container p-2 sm:p-3 rounded-xl flex flex-col items-center text-center group relative">
                <div class="photo-wrapper cursor-pointer mb-2 border border-gray-200 group-hover:border-brand-teal" onclick="openModal('${p.id}')">
                    <img src="${url||''}" onerror="this.style.backgroundColor='${bg}';this.src='https://placehold.co/300x300/cccccc/000000?text=${isOld?'A':'C'}'" class="visible-photo">
                    <img src="${hidden||''}" onerror="this.style.backgroundColor='${bg}';this.src='https://placehold.co/300x300/cccccc/000000?text=${isOld?'C':'A'}'" class="hidden-photo">
                </div>
                <div class="w-full">
                    <div class="font-bold text-slate-800 text-sm leading-tight">${p.nombre}</div>
                    <div class="font-bold text-slate-800 text-sm leading-tight">${p.apellidos}</div>
                </div>
            </div>`;
        }).join('');
            
            const btn = document.getElementById('toggle-all-btn');
            const isOld = currentView === 'old';
            btn.innerHTML = isOld ? 'üíº Ver Actualidad' : 'üéì Ver Colegio';
            btn.className = `w-full md:w-auto py-3 px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all ${isOld?'bg-new-purple':'bg-old-blue'}`;
            document.getElementById('header-title').innerHTML = isOld ? 'CODEMA 1964 | <span class="opacity-70 font-light">Colegio</span>' : 'CODEMA 1964 | <span class="opacity-70 font-light">Presente</span>';
        }

        window.performSearch = function() {
            const q = document.getElementById('search-input').value.toLowerCase();
            window.displayData = alumniData.filter(p => JSON.stringify(p).toLowerCase().includes(q));
            renderOrla();
        }

        window.toggleAllPhotos = function() { currentView = currentView==='old'?'current':'old'; renderOrla(); }

        window.openModal = function(id) {
            selectedPerson = alumniData.find(p=>p.id===id);
            document.getElementById('modal-wrapper').classList.remove('hidden');
            updateModal(currentView);
        }
        
        window.updateModal = function(view) {
            if(!selectedPerson) return;
            document.getElementById('modal-view-state').value = view;
            const isOld = view === 'old';
            document.getElementById('modal-name').textContent = `${selectedPerson.nombre} ${selectedPerson.apellidos}`;
            
            const img = document.getElementById('modal-photo');
            const url = isOld ? selectedPerson.antiguo?.fotoUrl : selectedPerson.actual?.fotoUrl;
            img.src = url||''; img.onerror=()=>{img.src=`https://placehold.co/400x400/333/fff?text=${isOld?'A':'C'}`};

            const p = selectedPerson.antiguo||{}; const c = selectedPerson.actual||{};
            const row = (l,v) => `<div class="flex justify-between border-b border-slate-700 py-2 text-sm"><span class="text-slate-400 font-medium">${l}</span><span class="text-slate-200 text-right">${v||'-'}</span></div>`;

            document.getElementById('past-details').innerHTML = `<h4 class="text-old-blue font-bold mb-2">üéì Etapa Colegio</h4>${row('A√±os', `${p.anoEntrada||'?'} - ${p.anoSalida||'?'}`)}${row('Curso Entr.', p.cursoEntrada)}${row('Curso Sal.', p.cursoSalida)}${row('Foto', p.fechaFoto)}`;
            document.getElementById('current-details').innerHTML = `<h4 class="text-new-purple font-bold mb-2">üíº Actualidad</h4>${row('Profesi√≥n', c.profesion)}${row('Ciudad', c.ciudad)}${row('Email', c.email)}`;

            const editBtn = document.getElementById('modal-edit-btn');
            const delBtn = document.getElementById('modal-del-btn');
            const mailBtn = document.getElementById('modal-mail-btn');
            
            if(isCurrentUserAdmin()) {
                editBtn.classList.remove('hidden'); 
                // ASIGNACI√ìN DIRECTA DEL ONCLICK
                editBtn.onclick = function() { openDataEntryModal('edit', selectedPerson.id); };
                
                delBtn.classList.remove('hidden'); 
                delBtn.onclick = function() {
                    document.getElementById('confirm-doc-id').value = selectedPerson.id;
                    document.getElementById('confirm-name').textContent = selectedPerson.nombre;
                    document.getElementById('confirm-delete-modal').classList.remove('hidden');
                }
                mailBtn.classList.add('hidden');
            } else {
                editBtn.classList.add('hidden'); delBtn.classList.add('hidden'); mailBtn.classList.remove('hidden');
                mailBtn.onclick=()=>window.location.href=`mailto:${ADMIN_EMAIL}?subject=Datos ${selectedPerson.nombre}&body=Hola...`;
            }
            const tgl = document.getElementById('modal-toggle-btn');
            tgl.textContent = isOld ? 'Ver Foto Actual' : 'Ver Foto Antigua';
            tgl.className = `w-full py-3 rounded-lg font-bold text-white shadow mt-4 ${isOld?'bg-new-purple':'bg-old-blue'}`;
        }
        document.addEventListener('DOMContentLoaded', init);
    </script>

    <div id="selection-modal" class="modal-overlay fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 text-center relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-old-blue to-new-purple"></div>
            <h2 class="text-3xl font-black text-slate-800 mb-2">Coraz√≥n de Mar√≠a</h2>
            <p class="text-3xl font-black text-slate-800 mb-2">Generaci√≥n 64</p>
            
            <div class="space-y-3">
                <button onclick="selectView('old')" class="w-full py-4 rounded-xl text-white font-bold bg-old-blue shadow-lg hover:scale-105 transition">üéì Colegio</button>
                <button onclick="selectView('current')" class="w-full py-4 rounded-xl text-white font-bold bg-new-purple shadow-lg hover:scale-105 transition">üíº Actualidad</button>
            </div>
            <div class="mt-6 flex justify-center"><div id="connection-status"></div></div>
        </div>
    </div>

    <div id="app-main-content" class="hidden flex flex-col min-h-screen">
        <header class="bg-brand-dark text-white shadow-md sticky top-0 z-40 border-b border-slate-800">
            <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                <h1 id="header-title" class="text-lg md:text-xl font-bold truncate">Orla</h1>
                <div class="flex items-center gap-3">
                    <div id="current-uid-display"></div>
                    <button id="add-btn-header" onclick="openDataEntryModal('add')" class="hidden bg-brand-teal hover:bg-teal-600 text-white p-2 rounded-full shadow"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg></button>
                </div>
            </div>
        </header>

        <main class="flex-grow max-w-7xl mx-auto px-3 sm:px-6 py-4 w-full">
            <div class="bg-white/90 backdrop-blur p-3 md:p-4 rounded-2xl shadow border border-slate-200 mb-6 flex flex-col md:flex-row gap-3 sticky top-16 z-30">
                <input type="text" id="search-input" onkeyup="performSearch()" placeholder="Buscar..." class="w-full md:flex-grow bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-teal">
                <button id="toggle-all-btn" onclick="toggleAllPhotos()"></button>
            </div>
            <div id="orla-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-6 pb-20"></div>
        </main>
    </div>

    <div id="modal-wrapper" class="modal-overlay fixed inset-0 flex items-end md:items-center justify-center p-0 md:p-4 hidden" onclick="if(event.target.id==='modal-wrapper')window.closeModal()">
        <div class="bg-modal-bg w-full md:w-auto md:max-w-4xl md:rounded-2xl rounded-t-2xl shadow-2xl border border-slate-700 overflow-hidden flex flex-col max-h-[90vh] dark-scroll">
            <div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900 shrink-0">
                <h2 id="modal-name" class="text-lg font-bold text-white truncate pr-4"></h2>
                <button onclick="window.closeModal()" class="text-slate-400 hover:text-white text-2xl p-2">&times;</button>
            </div>
            <div class="overflow-y-auto p-6">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-5/12 flex flex-col items-center shrink-0">
                        <div class="w-48 h-48 md:w-64 md:h-64 rounded-xl overflow-hidden border-2 border-slate-600 shadow-lg bg-slate-800 relative mb-4">
                            <img id="modal-photo" class="w-full h-full object-cover">
                        </div>
                        <input type="hidden" id="modal-view-state">
                        <button id="modal-toggle-btn" onclick="updateModal(document.getElementById('modal-view-state').value==='old'?'current':'old')"></button>
                        
                        <div class="w-full mt-4 space-y-3">
                            <button id="modal-mail-btn" class="hidden w-full py-3 rounded-lg bg-brand-amber text-white font-bold hover:bg-amber-600">‚úâ Enviar Datos</button>
                            <div class="flex gap-3 w-full">
                                <button id="modal-edit-btn" class="hidden w-1/2 py-3 rounded-lg bg-slate-700 text-white font-bold hover:bg-slate-600 border border-slate-600">‚úèÔ∏è Editar</button>
                                <button id="modal-del-btn" class="hidden w-1/2 py-3 rounded-lg bg-btn-red text-white font-bold hover:bg-red-600">üóëÔ∏è Borrar</button>
                            </div>
                        </div>
                    </div>
                    <div class="md:w-7/12 space-y-4 w-full">
                        <div id="past-details" class="bg-slate-800/50 p-4 rounded-xl border border-slate-700"></div>
                        <div id="current-details" class="bg-slate-800/50 p-4 rounded-xl border border-slate-700"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="data-entry-modal" class="modal-edit-overlay fixed inset-0 flex items-end md:items-center justify-center p-0 md:p-4 hidden">
        <div class="bg-modal-bg w-full md:max-w-2xl md:rounded-2xl rounded-t-2xl shadow-2xl border border-slate-700 p-6 max-h-[95vh] overflow-y-auto dark-scroll text-white">
            <div class="flex justify-between mb-6">
                <h2 id="data-entry-title" class="text-xl font-bold"></h2>
                <button onclick="window.closeDataEntryModal()" class="text-slate-400 hover:text-white text-2xl">&times;</button>
            </div>
            <form id="data-entry-form" onsubmit="saveAlumnusData(event)" class="space-y-4">
                <input type="hidden" id="form-mode"><input type="hidden" id="form-doc-id">
                <div class="grid grid-cols-2 gap-3">
                    <div><label class="text-xs font-bold text-slate-400">Nombre</label><input type="text" id="nombre" required class="w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:border-brand-teal outline-none"></div>
                    <div><label class="text-xs font-bold text-slate-400">Apellidos</label><input type="text" id="apellidos" required class="w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:border-brand-teal outline-none"></div>
                </div>
                <div class="p-3 bg-blue-900/10 rounded-xl border border-blue-900/30">
                    <h3 class="font-bold text-old-blue mb-2 text-sm">DATOS COLEGIO</h3>
                    <input type="url" id="fotoAntiguaUrl" placeholder="URL Foto Antigua" class="w-full p-2 mb-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <input type="number" id="anoEntrada" placeholder="A√±o Entr." class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                        <input type="number" id="anoSalida" placeholder="A√±o Sal." class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                    </div>
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <input type="text" id="cursoEntrada" placeholder="Curso Entr." class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                        <input type="text" id="cursoSalida" placeholder="Curso Sal." class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                    </div>
                    <input type="text" id="fechaFotoAntigua" placeholder="Detalle Foto" class="w-full p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                </div>
                <div class="p-3 bg-purple-900/10 rounded-xl border border-purple-900/30">
                    <h3 class="font-bold text-new-purple mb-2 text-sm">DATOS ACTUALES</h3>
                    <input type="url" id="fotoActualUrl" placeholder="URL Foto Actual" class="w-full p-2 mb-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="profesion" placeholder="Profesi√≥n" class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                        <input type="text" id="ciudad" placeholder="Ciudad" class="p-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                    </div>
                    <input type="email" id="email" placeholder="Email" class="w-full p-2 mt-2 bg-slate-800 border border-slate-600 rounded text-white text-sm">
                </div>
                <button type="submit" id="data-entry-button" class="w-full py-4 bg-brand-teal text-white font-bold rounded-xl shadow hover:bg-teal-700 transition"></button>
                <div id="data-entry-status" class="text-center text-sm font-bold h-5"></div>
            </form>
        </div>
    </div>

    <div id="confirm-delete-modal" class="modal-edit-overlay fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="bg-modal-bg rounded-xl p-6 max-w-xs w-full text-center shadow-2xl border border-slate-700">
            <h3 class="text-lg font-bold text-white mb-2">¬øBorrar Ficha?</h3>
            <p class="text-sm text-slate-400 mb-6">Se eliminar√° a <span id="confirm-name" class="font-bold text-white"></span>.</p>
            <input type="hidden" id="confirm-doc-id">
            <div class="flex gap-3">
                <button onclick="document.getElementById('confirm-delete-modal').classList.add('hidden')" class="flex-1 py-3 bg-slate-700 text-white rounded-xl font-bold hover:bg-slate-600">Cancelar</button>
                <button onclick="deleteAlumnusData()" class="flex-1 py-3 bg-btn-red text-white rounded-xl font-bold hover:bg-red-600">Borrar</button>
            </div>
        </div>
    </div>

</body>
</html>